{% extends "base.html" %}

{% block content %}
    <div class="au-card m-b-30">
        <div class="au-card-inner">
            {% if form.errors %}
                <div class="alert alert-danger" role="alert">
                    Preencha os dados corretamente! <div style="padding-left: inherit;">{{ form.errors }}</div>
                </div>
            {% endif %}

            <form method="POST" class="row" id="form">
                {% csrf_token %}

                {% for field in form %}
                    <div class="form-group col-md-3">
                        <label class="control-label">{{ field.label }}</label>
                        {{ field }}
                    </div>
                {% endfor %}

                <div class="form-row form-group col-md-12 justify-content-end">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                </div>
            </form>
        </div>
    </div>
{% endblock content %}

{% block scripts %}
    {% if error_message %}
        <script type="text/javascript">
            swal.fire({
                type: 'warning',
                text: "{{ error_message }}"
            });
        </script>
    {% endif %}

    {% if confirm_message %}
        <script type="text/javascript">
            swal.fire({
                type: 'success',
                text: "{{ confirm_message }}",
                showCancelButton: true,
                confirmButtonText: 'Sim',
                cancelButtonText: 'NÃ£o',
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33'
            }).then(function (result) {
                if (result.value) {
                    var form = document.getElementById('form');
                    form.action = '/aposentar';
                    form.submit();
                } else {
                    location.href = location.href
                }
            });
        </script>
    {% endif %}
{% endblock scripts %}